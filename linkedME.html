<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="author" content="test" />
    <!--Bug Man-->
    <title>深度链接</title>
</head>
<body>

</body>
<script type="text/javascript" src="./js/jquery-1.10.2.min.js"></script>
<script src="https://static.lkme.cc/linkedme.min.js" ></script>
<script type="text/javascript">
	$(function(){
		/* 
	  接口名称： link(data, callback, autoSelect)
	  参数说明：
	    data ：生成深度链接的请求参数【必选】
	    callback ：回调函数 【必选】
	    autoSelect ：生成深度链接之后是否自动打开深度链接，默认值为false 【可选】
	*/
      linkedme.init("235d6842193c1bfb34204dd2ee7a3585", {type:"live"}, null);
      var data = {};
      data.type = "live";  //表示现在使用线上模式,如果填写"test", 表示测试模式.【可选】
      data.feature = "功能名称"; // 自定义深度链接功能，多个用逗号分隔，【可选】
      data.stage = "阶段名称"; // 自定义深度链接阶段，多个用逗号分隔，【可选】
      data.channel = "渠道名称"; // 自定义深度链接渠道，多个用逗号分隔，【可选】
      data.tags = "标签名称"; // 自定义深度链接标签，多个用逗号分隔，【可选】
      data.ios_custom_url = "http://www.pgyer.com/Headline"; // 自定义iOS平台下App的下载地址，如果是AppStore的下载地址可以不用填写，需填写http或https【可选】
      data.ios_direct_open = true; //未安装情况下，设置为true为直接打开ios_custom_url，默认为false【可选】
      data.android_custom_url = "https://zhishun520.com/app-debug.apk";// 自定义安卓平台下App的下载地址，需填写http或https【可选】
      data.android_direct_open =true; //设置为true，所有情况下跳转android_custom_url，默认为false【可选】
    // 下面是自定义深度链接参数，用户点击深度链接打开app之后，params的参数会通过LinkedME服务器透传给app，由app根据参数进行相关跳转
    // 例如：详情页面的参数，写入到params中，这样在唤起app并获取参数后app根据参数跳转到详情页面
    var value1 = 1;
    var value2 = 2;
    data.params = '{"key1":"'+value1+'","key2":"'+value2+'"}'; //注意单引号和双引号的位置
   
    linkedme.link(data, function(err, response){
        if(err){
          // 生成深度链接失败，返回错误对象err
        } else {
          /* 
            生成深度链接成功，深度链接可以通过data.url得到，
            将深度链接绑定到<a>标签，这样当用户点击这
            个深度链接，如果是在pc上，那么跳转到深度链接二维
            码页面，用户用手机扫描该二维码就会打开app；如果
            在移动端，深度链接直接会根据手机设备类型打开ios
            或者安卓app 
           */
/*      var urlCode = decodeURIComponent(url);
		console.log(urlCode);*/
        	document.body.innerHTML += '<a class="linkedme" href="'+response.url+'">LinkedME深度链接</a>';
        	window.location.href= $(".linkedme").attr("href");
        }
      },false);	  
	})
	
</script>
</html>
